<!DOCTYPE html><html lang="en-us" >

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="generator" content="Source Themes Academic 4.8.0">

  

  
  

  
  
  
  
  
    
    
    
  
  

  <meta name="author" content="shikihuiku">

  
  
  
    
  
  <meta name="description" content="Wave Intrinsicsの動作を理解しよう">

  
  <link rel="alternate" hreflang="en-us" href="https://shikihuiku.github.io/post/wave_intrinsics1/">

  


  
  
  
  <meta name="theme-color" content="#2962ff">
  

  
  

  
  
  
  
    
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css" integrity="sha256-FMvZuGapsJLjouA6k7Eo2lusoAX9i0ShlWFG6qt7SLc=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css" integrity="sha256-Vzbj7sDDS/woiFS3uNKo8eIuni59rjyNGtXfstRzStA=" crossorigin="anonymous">

    
    
    
      
    
    
      
      
        
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.2/styles/github.min.css" crossorigin="anonymous" title="hl-light">
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.2/styles/dracula.min.css" crossorigin="anonymous" title="hl-dark" disabled>
        
      
    

    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.5.1/leaflet.css" integrity="sha256-SHMGCYmST46SoyGgo4YR/9AlK1vf3ff84Aq9yK4hdqM=" crossorigin="anonymous">
    

    

    
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/lazysizes/5.1.2/lazysizes.min.js" integrity="sha256-Md1qLToewPeKjfAHU1zyPwOutccPAm5tahnaw7Osw0A=" crossorigin="anonymous" async></script>
      
    
      

      
      

      
    
      

      
      

      
    
      

      
      
        
      

      
    
      

      
      

      
    

  

  
  
  

  
  
  
  
  <link rel="stylesheet" href="/css/academic.css">

  




  


  
  

  

  <link rel="manifest" href="/index.webmanifest">
  <link rel="icon" type="image/png" href="/images/icon_hu127225d7ed9c50974404790b7c221374_401884_32x32_fill_lanczos_center_2.png">
  <link rel="apple-touch-icon" type="image/png" href="/images/icon_hu127225d7ed9c50974404790b7c221374_401884_192x192_fill_lanczos_center_2.png">

  <link rel="canonical" href="https://shikihuiku.github.io/post/wave_intrinsics1/">

  
  
  
  
  
  
  
    
  
  
  <meta property="twitter:card" content="summary_large_image">
  
  <meta property="og:site_name" content="shikihuiku – 色不異空 – Real-time rendering topics in Japanese.">
  <meta property="og:url" content="https://shikihuiku.github.io/post/wave_intrinsics1/">
  <meta property="og:title" content="HLSLのWave Intrinsicsについて | shikihuiku – 色不異空 – Real-time rendering topics in Japanese.">
  <meta property="og:description" content="Wave Intrinsicsの動作を理解しよう"><meta property="og:image" content="https://shikihuiku.github.io/post/wave_intrinsics1/featured.png">
  <meta property="twitter:image" content="https://shikihuiku.github.io/post/wave_intrinsics1/featured.png"><meta property="og:locale" content="en-us">
  
    
      <meta property="article:published_time" content="2020-08-16T20:00:32&#43;09:00">
    
    <meta property="article:modified_time" content="2020-08-16T20:00:32&#43;09:00">
  

  


    






  




<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://shikihuiku.github.io/post/wave_intrinsics1/"
  },
  "headline": "HLSLのWave Intrinsicsについて",
  
  "image": [
    "https://shikihuiku.github.io/post/wave_intrinsics1/featured.png"
  ],
  
  "datePublished": "2020-08-16T20:00:32+09:00",
  "dateModified": "2020-08-16T20:00:32+09:00",
  
  "author": {
    "@type": "Person",
    "name": "shikihuiku"
  },
  
  "publisher": {
    "@type": "Organization",
    "name": "shikihuiku – 色不異空 – Real-time rendering topics in Japanese.",
    "logo": {
      "@type": "ImageObject",
      "url": "https://shikihuiku.github.io/images/icon_hu127225d7ed9c50974404790b7c221374_401884_192x192_fill_lanczos_center_2.png"
    }
  },
  "description": "Wave Intrinsicsの動作を理解しよう"
}
</script>

  

  


  


  





  <title>HLSLのWave Intrinsicsについて | shikihuiku – 色不異空 – Real-time rendering topics in Japanese.</title>

</head>


<body id="top" data-spy="scroll" data-offset="70" data-target="#TableOfContents" class=" ">

  <aside class="search-results" id="search">
  <div class="container">
    <section class="search-header">

      <div class="row no-gutters justify-content-between mb-3">
        <div class="col-6">
          <h1>Search</h1>
        </div>
        <div class="col-6 col-search-close">
          <a class="js-search" href="#"><i class="fas fa-times-circle text-muted" aria-hidden="true"></i></a>
        </div>
      </div>

      <div id="search-box">
        
        <input name="q" id="search-query" placeholder="Search..." autocapitalize="off"
        autocomplete="off" autocorrect="off" spellcheck="false" type="search" class="form-control">
        
      </div>

    </section>
    <section class="section-search-results">

      <div id="search-hits">
        
      </div>

    </section>
  </div>
</aside>


  












<nav class="navbar navbar-expand-lg navbar-light compensate-for-scrollbar" id="navbar-main">
  <div class="container">

    
    <div class="d-none d-lg-inline-flex">
      <a class="navbar-brand" href="/">shikihuiku – 色不異空 – Real-time rendering topics in Japanese.</a>
    </div>
    

    
    <button type="button" class="navbar-toggler" data-toggle="collapse"
            data-target="#navbar-content" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
    <span><i class="fas fa-bars"></i></span>
    </button>
    

    
    <div class="navbar-brand-mobile-wrapper d-inline-flex d-lg-none">
      <a class="navbar-brand" href="/">shikihuiku – 色不異空 – Real-time rendering topics in Japanese.</a>
    </div>
    

    
    
    <div class="navbar-collapse main-menu-item collapse justify-content-end" id="navbar-content">

      
      <ul class="navbar-nav d-md-inline-flex">
        

        

        
        
        
          
            
          
        

        
        
        
        
        
        

        <li class="nav-item">
          <a class="nav-link " href="https://shikihuiku.wordpress.com/" target="_blank" rel="noopener"><span>Old Posts</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        
          
          
          
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/#posts"><span>Posts</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        
          
          
          
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/#about"><span>About</span></a>
        </li>

        
        

      

        
      </ul>
    </div>

    <ul class="nav-icons navbar-nav flex-row ml-auto d-flex pl-md-2">
      
      <li class="nav-item">
        <a class="nav-link js-search" href="#" aria-label="Search"><i class="fas fa-search" aria-hidden="true"></i></a>
      </li>
      

      
      <li class="nav-item dropdown theme-dropdown">
        <a href="#" class="nav-link js-theme-selector" data-toggle="dropdown" aria-haspopup="true">
          <i class="fas fa-palette" aria-hidden="true"></i>
        </a>
        <div class="dropdown-menu">
          <a href="#" class="dropdown-item js-set-theme-light">
            <span>Light</span>
          </a>
          <a href="#" class="dropdown-item js-set-theme-dark">
            <span>Dark</span>
          </a>
          <a href="#" class="dropdown-item js-set-theme-auto">
            <span>Automatic</span>
          </a>
        </div>
      </li>
      

      

    </ul>

  </div>
</nav>



  <article class="article">

  












  

  
  
  
<div class="article-container pt-3">
  <h1>HLSLのWave Intrinsicsについて</h1>

  

  
    


<div class="article-metadata">

  
  

  
  <span class="article-date">
    
    
      
    
    2020/08/16
  </span>
  

  

  
  <span class="middot-divider"></span>
  <span class="article-reading-time">
    18 min read
  </span>
  

  
  
  

  
  

</div>

    














  
</div>



  <div class="article-container">

    <div class="article-style">
      <h2 id="hlslのwave-intrinsicsについて">HLSLのWave Intrinsicsについて</h2>
<p>Wave Intrinsicsは、HLSLのShader Model6.0から導入された新しい組み込み関数群です。
従来の他のHLSL組み込み関数が、単一スレッド内での変数のみを動作の対象するのに対して、
Wave Intrinsicsは、Waveと呼ばれる複数のスレッド間でのデータの交換や演算を行うための組み込み関数となります。
従来は、Compute Shaderなどで、他のスレッドの変数（演算用のレジスタ）が保持する値を参照するには、groupsharedで宣言された変数やUAVなどで宣言されたバッファーに情報を一旦ストアする必要があったうえ、スレッド間の同期命令が必要でした。
Wave Intrinsicsは、Wave内のスレッド間に限定されますが、他のスレッドの変数（演算用のレジスタ）の値を参照したり演算することが出来ます。
これにより、スレッド間のレジスタ空間の共有が可能になり、複数のスレッドで協調的に動作するシェーダーコードが、より記述しやすくなりました。
また、Wave内は命令実行のタイミングが同じであることが（論理上において）保証されていることから、スレッド間同期命令を必要としないのも大きな利点です。
一点注意が必要なのは、Wave IntrinsicsはShader Model 6.0以上に存在する組み込み関数ですが、実際に使用できるかどうかは、<code>ID3D12Device::CheckFeatureSupport()</code>で、<code>D3D12_FEATURE_D3D12_OPTIONS1</code>を調べる必要があります。</p>
<h2 id="用語">用語</h2>
<p>ここではWave Intrinsicsに関連する用語を説明します。</p>
<h4 id="wave">Wave</h4>
<p>NVIDIAの用語で&quot;warp&quot;とよばれ、AMDの用語では、&ldquo;wavefront&quot;と呼ばれてきたものです。命令発行が、同時に行われれるスレッドのグループのことです。</p>
<h4 id="lane">Lane</h4>
<p>Waveを構成する個々のスレッドを指します。</p>
<p>以下の図は、一つのWaveの中に32Lane分のスレッドが存在する場合の図になります。この図式を使って様々なWave Intrinsicsについて説明していきたいと思います。






  



  
  











<figure class="center" id="figure-waveとlane">


  <a data-fancybox="" href="/post/wave_intrinsics1/wave_hu550fc97d8560033e52f050ac0d549368_13159_2000x2000_fit_lanczos_2.png" data-caption="WaveとLane">


  <img data-src="/post/wave_intrinsics1/wave_hu550fc97d8560033e52f050ac0d549368_13159_2000x2000_fit_lanczos_2.png" class="lazyload" alt="" width="40%" height="441">
</a>


  
  
  <figcaption>
    WaveとLane
  </figcaption>


</figure>
</p>
<h4 id="inactive-lane">Inactive Lane</h4>
<p>Waveを構成する個々のスレッドのうち、命令を実行しないスレッドを指します。</p>
<h4 id="active-lane">Active Lane</h4>
<p>Waveを構成する個々のスレッドのうち、命令を実行するスレッドを指します。</p>
<p>以下の図は、左側のシェーダーコードの実行に伴って変化する、Active LaneとInactive Laneの変化の例を表した図です。右側の3 Laneは、スレッド起動数等の初期条件によるInactive Laneです。
Pixel ShaderやCompute Shaderで必要とされるスレッド数が、Waveの倍数でなかった場合は、Inactive Laneの存在するWaveが起動されます。このようなInactive Laneは、状態が動的に変更されることは無く、終始Inactive Laneのままです。
3行目のIf()による分岐の条件を満たさなかったLaneは、If()ステートで囲まれたコードブロックが終了するまでInactive Laneとなります。Wave内では命令実行は暗黙的に同期する決まりになっているので、Inactive Laneはその間なにも実行せず、他のLaneが該当コードブロックの実行を完了するまで待ちます。
図にはありませんが、If()ステートのコードブロックの実行が終了すれば、条件分岐によってInactive Laneとなったスレッドは、再びActive Laneへと復帰します。</p>






  



  
  











<figure class="center" id="figure-active-laneとinactive-lane">


  <a data-fancybox="" href="/post/wave_intrinsics1/active_inactive_hu6f4caf7822c3e8aa1ace8fd32f3899a3_110070_2000x2000_fit_lanczos_2.png" data-caption="Active LaneとInactive Lane">


  <img data-src="/post/wave_intrinsics1/active_inactive_hu6f4caf7822c3e8aa1ace8fd32f3899a3_110070_2000x2000_fit_lanczos_2.png" class="lazyload" alt="" width="40%" height="965">
</a>


  
  
  <figcaption>
    Active LaneとInactive Lane
  </figcaption>


</figure>

<h4 id="quad">Quad</h4>
<p>先頭から連続する4Lane分づつのスレッドのグループを指します。特にPixel Shaderでは、RenderTargetにおける2x2ピクセルブロックが一つのQuadにアサインされます。
Pixel Shaderにおけるddx/ddyなどのGradient命令や、テクスチャーのLoDの計算は、Quad内の変数の差分によって実現されており、Gradientの計算のみに寄与してPixelを塗らないLane（スレッド）をHelper Laneと呼びます。</p>
<p>以下の図は、とあるプリミティブをレンダリングする際の、QuadとHelper LaneのRenderTarget上での表現とWaveとしての表現の対応図です。</p>






  



  
  











<figure class="center" id="figure-quadとhelper-lane">


  <a data-fancybox="" href="/post/wave_intrinsics1/quad_helper_hu842ae506986670f32043d947253c500c_93104_2000x2000_fit_lanczos_2.png" data-caption="QuadとHelper Lane">


  <img data-src="/post/wave_intrinsics1/quad_helper_hu842ae506986670f32043d947253c500c_93104_2000x2000_fit_lanczos_2.png" class="lazyload" alt="" width="40%" height="755">
</a>


  
  
  <figcaption>
    QuadとHelper Lane
  </figcaption>


</figure>

<h2 id="waveのサイズについて">Waveのサイズについて</h2>
<p>Wave Intrinsicsを使う上で、Waveのサイズというは非常に重要なファクターで、これを理解すること無しに、効率的な処理をデザインすることは難しいと思います。
NVIDIAのWarpは、伝統的に32 Lane/Waveです。対して、AMDのGCNアーキテクチャは64 Lane/Waveで動作しています。
同じくAMDのRDNAアーキテクチャは、Wave32とWave64の二つの動作モードを持ち、それぞれが、32, 64 Lane/Waveで動作しています。
どちらのモードでシェーダーが実行されるかは、ドライバーが決定するようなので、シェーダーは両モードで正しく動く必要があります。結局のところ、32 Lane/Wave、64 Lane/Waveの両方をサポートすることができれば、NVIDIA, AMDの両GPUに対応したアプリケーションとなるはずです。</p>






  



  
  











<figure class="center" id="figure-32-lanewaveと64-lanewave">


  <a data-fancybox="" href="/post/wave_intrinsics1/32_64_lane_hu55f4de2178e3ca0a112fe7c34fbabb49_24264_2000x2000_fit_lanczos_2.png" data-caption="32 Lane/Waveと64 Lane/Wave">


  <img data-src="/post/wave_intrinsics1/32_64_lane_hu55f4de2178e3ca0a112fe7c34fbabb49_24264_2000x2000_fit_lanczos_2.png" class="lazyload" alt="" width="40%" height="630">
</a>


  
  
  <figcaption>
    32 Lane/Waveと64 Lane/Wave
  </figcaption>


</figure>

<p><code>ID3D12Device::CheckFeatureSupport()</code>の<code>D3D12_FEATURE_D3D12_OPTIONS1</code>では、Wave Intrinsicsの使用の可否についてとともに、使用される可能性のあるWaveのサイズの上限値と下限値が返されます。
したがって先のRDNAの様に、単一のアーキテクチャでも、Waveのサイズは可変であると考える必要があるのかもしれません。しかし、WaveのサイズのAPI仕様としての上限値と下限値である 4 と 128 はあまりにもかけ離れているため、Waveのサイズに依存するコードを記述する際に、すべてのWaveのサイズをサポートすることは非現実的です。また、実際には使用されないWaveのサイズのためにコードを書くのも無駄だと思います。したがって、現実的な実装方法としては<code>D3D12_FEATURE_D3D12_OPTIONS1</code>でWaveのサイズの上限値と下限値をチェックし、32と64の範囲ならば、Wave Intrinsicsを使ったシェーダーコードを使用し、そうでない場合はWave Intrinsicsを使用していないフォールバックのシェーダーコードを実行するか、エラーを出力して動作を終了するべきだと思います。</p>
<p>Waveのサイズは、<code>WaveGetLaneCount</code>というWave Intrinsicsを使って取得できます。しかし、これは裏を返せば、<code>D3D12_FEATURE_D3D12_OPTIONS1</code>のWaveの上限値と下限値に幅がある場合は、HLSLのシェーダーコードを実行するまで、Waveのサイズが分からないという事になります。（これはAPIのデザインの問題だと思います。）</p>
<h2 id="waveのサイズとthread-groupのサイズについて">WaveのサイズとThread Groupのサイズについて</h2>
<p>Wave Intrinsicsは、あくまでWaveのサイズを基準とした動作になっていて、Compute Shaderのnumthreadsの大きさは、Waveのサイズとは関係ありません。ただし、Wave Intrinsicsを使う場合は、numthreadsの大きさはWaveのサイズを意識したものが良いと思います。
WaveのThread Group内でのマッピングは、Row Oriented　(X軸優先）です。（ただし、これを明記しているドキュメントが見当たらなかったので注意が必要です。）numthreadsの大きさが、Waveのサイズの倍数でなかった場合は、シェーダーが実行される前からInactive Laneが存在するWaveが起動されます。この場合、Waveのサイズ分のスレッドがすべて動作していることを前提として記述されたシェーダーは、動作が破綻するので注意が必要です。
現状では、<code>ID3D12Device::CheckFeatureSupport()</code>の<code>D3D12_FEATURE_D3D12_OPTIONS1</code>の返すWaveのサイズの上限値の倍数をnumthreadsの大きさとすることで、このような事態を回避する事ができると思います。</p>






  



  
  











<figure class="center" id="figure-numthreadとwave">


  <a data-fancybox="" href="/post/wave_intrinsics1/numthread_wave_hu87309c82afe6bdb07430f9b22f94f645_45303_2000x2000_fit_lanczos_2.png" data-caption="numthreadとWave">


  <img data-src="/post/wave_intrinsics1/numthread_wave_hu87309c82afe6bdb07430f9b22f94f645_45303_2000x2000_fit_lanczos_2.png" class="lazyload" alt="" width="40%" height="755">
</a>


  
  
  <figcaption>
    numthreadとWave
  </figcaption>


</figure>

<h3 id="pixelshaderとwave-intrinsicsについて">PixelShaderとWave Intrinsicsについて</h3>
<p>（これも明記しているドキュメントが見当たらなかったので注意してください）<br>
Pixel Shaderでは、すべてのWave Intrinsicsの使用が許されています。しかし、Pixel Shaderにおける描画ピクセルとWaveやLaneの対応は、描画されるプリミティブの位置と、GPUとドライバー、そしてPixel Shaderのソースコードによって決まると考えられます。
シンプルな例では、ピクセルシェーダーのスレッドは描画されるプリミティブのピクセルと一対一の関係で起動されると思います。ただし、ピクセルシェーダー内で、Gradinet命令（ddx/ddy）を使用したり、テクスチャーのサンプリングにおいて、LoDを明示的に指定しなかった場合は、スレッド間の値（テクスチャサンプリングにおいてはUV値）の差分を計算する必要があるため、起動されるスレッドは2x2ピクセル単位となります。そして、プリミティブとして描画されるピクセルを担当しているスレッドのみがRenderTargetへの出力を行います。残りのスレッドは、Helper Laneとなり、スレッドとして動作しますがRenderTargetへの出力を行いません。
プリミティブの描画においては、必要なスレッド数は必ずしもWaveのサイズの倍数とならないので、シェーダー内で条件分岐を行っていない状態でも、Inactive Laneが存在しているWaveが起動される可能性があります。また、複数のプリミティブが同一のWaveにパッキングされる可能性もあります。Pixel Shader内でWave Intrinsicsを使う場合は、これらの点について考慮する必要があると思います。</p>






  



  
  











<figure class="center" id="figure-quadとhelper-lane">


  <a data-fancybox="" href="/post/wave_intrinsics1/quad_helper_hu842ae506986670f32043d947253c500c_93104_2000x2000_fit_lanczos_2.png" data-caption="QuadとHelper Lane">


  <img data-src="/post/wave_intrinsics1/quad_helper_hu842ae506986670f32043d947253c500c_93104_2000x2000_fit_lanczos_2.png" class="lazyload" alt="" width="40%" height="755">
</a>


  
  
  <figcaption>
    QuadとHelper Lane
  </figcaption>


</figure>

<h2 id="shader-model-60のwave-intrinsicsについて">Shader Model 6.0のWave Intrinsicsについて</h2>
<p>Shader Model 6.0のWave Intrinsicsは以下のカテゴリに分類することができます。</p>
<ul>
<li>Wave Query<br>
WaveやLaneの状態取得</li>
<li>Wave Vote<br>
Wave内でのbooleanステート確認</li>
<li>Wave Broadcast<br>
Wave内で特定のLaneの変数値の取得</li>
<li>Wave Reduction<br>
Wave内での変数の演算</li>
<li>Wave Scan and Prefix<br>
Wave内での変数の演算(自身より小さいLane Indexに限る)</li>
<li>Quad-wide Shuffle operations<br>
Quadを動作対象とした、変数値の取得</li>
</ul>
<h3 id="wave-query">Wave Query</h3>
<p>WaveのLane数と、Lane Indexを調べるためのIntrinsicsです。<br>
加えて、Wave内で自身が先頭のActive Laneかどうかを返す、<code>WaveIsFirstLane</code>が含まれます。</p>
<h4 id="wavegetlanecount"><code>WaveGetLaneCount</code></h4>
<p>WaveのLaneの数を返します。全てのLaneで同じ値を受け取ります。






  



  
  











<figure class="center" >


  <a data-fancybox="" href="/post/wave_intrinsics1/wavegetcount_hu017ff3431e51e38ea7691ac81e49e3c2_14763_2000x2000_fit_lanczos_2.png" >


  <img data-src="/post/wave_intrinsics1/wavegetcount_hu017ff3431e51e38ea7691ac81e49e3c2_14763_2000x2000_fit_lanczos_2.png" class="lazyload" alt="" width="40%" height="382">
</a>



</figure>
</p>
<h4 id="wavegetlaneindex"><code>WaveGetLaneIndex</code></h4>
<p>Wave内での該当LaneのIndexを返します。個々のLaneで異なる値を受け取ります。






  



  
  











<figure class="center" >


  <a data-fancybox="" href="/post/wave_intrinsics1/wavegetlaneindex_hue63fa13725fdb66d601d5d878c1d0ae3_26912_2000x2000_fit_lanczos_2.png" >


  <img data-src="/post/wave_intrinsics1/wavegetlaneindex_hue63fa13725fdb66d601d5d878c1d0ae3_26912_2000x2000_fit_lanczos_2.png" class="lazyload" alt="" width="40%" height="520">
</a>



</figure>
</p>
<h4 id="waveisfirstlane"><code>WaveIsFirstLane</code></h4>
<p>bool値を返します。ActiveLaneの中で最小のLane IndexのLaneのみ<code>true</code>が返されます。残りのLaneは<code>false</code>が返されます。






  



  
  











<figure class="center" >


  <a data-fancybox="" href="/post/wave_intrinsics1/waveisfirstlane_huafbbbf3a8be6235948052771404a6e1b_51220_2000x2000_fit_lanczos_2.png" >


  <img data-src="/post/wave_intrinsics1/waveisfirstlane_huafbbbf3a8be6235948052771404a6e1b_51220_2000x2000_fit_lanczos_2.png" class="lazyload" alt="" width="40%" height="571">
</a>



</figure>
</p>
<h3 id="wave-vote">Wave Vote</h3>
<p>Wave内の他のActive Laneのboolのステータスを確認するためのIntrinsicsです。</p>
<h4 id="waveactiveanytrue"><code>WaveActiveAnyTrue</code></h4>
<p>引数にbool値を指定します。そして、いずれかのActive Laneが<code>true</code>を渡せば、全てのActive Laneに<code>true</code>が返されます。そうでない場合は、全てのActive Laneに<code>false</code>が返されます。</p>






  



  
  











<figure class="center" >


  <a data-fancybox="" href="/post/wave_intrinsics1/waveactiveanytrue_hue78662cc8f443afcaa688bcef7c43ea2_59746_2000x2000_fit_lanczos_2.png" >


  <img data-src="/post/wave_intrinsics1/waveactiveanytrue_hue78662cc8f443afcaa688bcef7c43ea2_59746_2000x2000_fit_lanczos_2.png" class="lazyload" alt="" width="40%" height="697">
</a>



</figure>

<h4 id="waveactivealltrue"><code>WaveActiveAllTrue</code></h4>
<p>引数にbool値を指定します。全てのActive Laneが<code>true</code>を渡せば、全てのActive Laneに<code>true</code>が返されます。そうでない場合は、全てのActive Laneに<code>false</code>が返されます。</p>






  



  
  











<figure class="center" >


  <a data-fancybox="" href="/post/wave_intrinsics1/waveactivealltrue_hu3ee6171c79406bc5f05b75ba065dfffc_59680_2000x2000_fit_lanczos_2.png" >


  <img data-src="/post/wave_intrinsics1/waveactivealltrue_hu3ee6171c79406bc5f05b75ba065dfffc_59680_2000x2000_fit_lanczos_2.png" class="lazyload" alt="" width="40%" height="708">
</a>



</figure>

<h4 id="waveactiveballot"><code>WaveActiveBallot</code></h4>
<p>引数にbool値を指定します。戻り値にuint4を返します。戻り値のuint4は、128bit-wideのビットマスクとなっており、各Active Laneが渡したbool値をビットマスクとして返します。Inacive Laneは暗黙的に0が設定されます。</p>






  



  
  











<figure class="center" >


  <a data-fancybox="" href="/post/wave_intrinsics1/waveactiveballot_hu441b454dd67f6c112671144c7a7d1adc_61292_2000x2000_fit_lanczos_2.png" >


  <img data-src="/post/wave_intrinsics1/waveactiveballot_hu441b454dd67f6c112671144c7a7d1adc_61292_2000x2000_fit_lanczos_2.png" class="lazyload" alt="" width="40%" height="769">
</a>



</figure>

<h3 id="wave-broadcast">Wave Broadcast</h3>
<p>Wave内で、特定のLaneの変数の値を、すべてのActive Laneで取得するためのIntrinsicsです。</p>
<h4 id="wavereadlaneat"><code>WaveReadLaneAt</code></h4>
<p>引数に、読み取りの対象となる変数とLane Indexを指定します。Lane Indexで指定されたLaneの、引数で指定された変数の値を、全てのActive Laneに返します。引数で指定した変数の型と同じ型が返されます。<br>
他にも、引数に指定した変数の型と同じ変数型を返すタイプのWave Intrinsicsがありますが、これらはベクトル型を含め、組み込み型の整数型と浮動小数点型の殆どがサポートされています。</p>






  



  
  











<figure class="center" >


  <a data-fancybox="" href="/post/wave_intrinsics1/wavereadlaneat_hu2ce763e09dbd4548c9ca84ea0f16840b_96939_2000x2000_fit_lanczos_2.png" >


  <img data-src="/post/wave_intrinsics1/wavereadlaneat_hu2ce763e09dbd4548c9ca84ea0f16840b_96939_2000x2000_fit_lanczos_2.png" class="lazyload" alt="" width="40%" height="1120">
</a>



</figure>

<h4 id="wavereadlanefirst"><code>WaveReadLaneFirst</code></h4>
<p>引数に、読み取りの対象となる変数を指定します。Active Laneの中で、最小のLane IndexのLaneの、引数で指定された変数の値を、すべてのActive Laneに返します。</p>






  



  
  











<figure class="center" >


  <a data-fancybox="" href="/post/wave_intrinsics1/wavereadlanefirst_hu6d9eb6b7bdb5af52098e10c274550961_77137_2000x2000_fit_lanczos_2.png" >


  <img data-src="/post/wave_intrinsics1/wavereadlanefirst_hu6d9eb6b7bdb5af52098e10c274550961_77137_2000x2000_fit_lanczos_2.png" class="lazyload" alt="" width="40%" height="930">
</a>



</figure>

<h3 id="wave-reduction">Wave Reduction</h3>
<p>Wave内でのActive Laneの変数の値を用いて演算するためのIntrinsicsです。一つの演算結果がすべてのActive Laneに返されます。</p>
<h4 id="waveactiveallequal"><code>WaveActiveAllEqual</code></h4>
<p>引数に、読み取りの対象となる変数を指定します。すべてのActive Laneの変数の値が等しい場合のみTrueを返します。</p>






  



  
  











<figure class="center" >


  <a data-fancybox="" href="/post/wave_intrinsics1/waveactiveallequal_hub0d81e969a1494ea62407696e116d131_41919_2000x2000_fit_lanczos_2.png" >


  <img data-src="/post/wave_intrinsics1/waveactiveallequal_hub0d81e969a1494ea62407696e116d131_41919_2000x2000_fit_lanczos_2.png" class="lazyload" alt="" width="40%" height="886">
</a>



</figure>

<h4 id="waveactivebitand"><code>WaveActiveBitAnd</code></h4>
<p>引数に、読み取りの対象となる整数型の変数を指定します。すべてのActive Laneの変数の値のBitwise AND(論理積)を演算した結果を返します。</p>
<h4 id="waveactivebitor"><code>WaveActiveBitOr</code></h4>
<p>引数に、読み取りの対象となる整数型の変数を指定します。すべてのActive Laneの変数の値のBitwise OR(論理和)を演算した結果を返します。</p>
<h4 id="waveactivebitxor"><code>WaveActiveBitXor</code></h4>
<p>引数に、読み取りの対象となる整数型の変数を指定します。すべてのActive Laneの変数の値のBitwise XOR(排他的論理和)を演算した結果を返します。</p>






  



  
  











<figure class="center" >


  <a data-fancybox="" href="/post/wave_intrinsics1/waveactivebitop_hu8c00d785c0bd006675ed4159e86102d6_54165_2000x2000_fit_lanczos_2.png" >


  <img data-src="/post/wave_intrinsics1/waveactivebitop_hu8c00d785c0bd006675ed4159e86102d6_54165_2000x2000_fit_lanczos_2.png" class="lazyload" alt="" width="40%" height="1045">
</a>



</figure>

<h4 id="waveactivecountbits"><code>WaveActiveCountBits</code></h4>
<p>引数に、boolを指定します。引数に<code>true</code>を指定したLaneの数を、すべてのActive Laneに返します。</p>






  



  
  











<figure class="center" >


  <a data-fancybox="" href="/post/wave_intrinsics1/waveactivecountbits_hu45ba85d97c3b69abe8f3e4ff68f45109_54517_2000x2000_fit_lanczos_2.png" >


  <img data-src="/post/wave_intrinsics1/waveactivecountbits_hu45ba85d97c3b69abe8f3e4ff68f45109_54517_2000x2000_fit_lanczos_2.png" class="lazyload" alt="" width="40%" height="756">
</a>



</figure>

<h4 id="waveactivemax"><code>WaveActiveMax</code></h4>
<p>引数に、読み取りの対象となる変数を指定します。すべてのActive Laneの変数の値の中で、最大値を、全てのActive Laneに返します。</p>
<h4 id="waveactivemin"><code>WaveActiveMin</code></h4>
<p>引数に、読み取りの対象となる変数を指定します。すべてのActive Laneの変数の値の中で、最小値を、全てのActive Laneに返します。</p>
<h4 id="waveactiveproduct"><code>WaveActiveProduct</code></h4>
<p>引数に、読み取りの対象となる変数を指定します。すべてのActive Laneの変数をの値を乗算した結果を、全てのActive Laneに返します。
演算の順序については、API仕様としての明確な定義が無いので、扱う変数の型や、値の範囲について注意が必要です。</p>
<h4 id="waveactivesum"><code>WaveActiveSum</code></h4>
<p>引数に、読み取りの対象となる変数を指定します。すべてのActive Laneの変数の値を加算した結果を、全てのActive Laneに返します。
演算の順序については、API仕様としての明確な定義が無いので、扱う変数の型や、値の範囲について注意が必要です。</p>






  



  
  











<figure class="center" >


  <a data-fancybox="" href="/post/wave_intrinsics1/waveactiveminmaxop_huc07e0fb502a11709116c047263e24c8f_56203_2000x2000_fit_lanczos_2.png" >


  <img data-src="/post/wave_intrinsics1/waveactiveminmaxop_huc07e0fb502a11709116c047263e24c8f_56203_2000x2000_fit_lanczos_2.png" class="lazyload" alt="" width="40%" height="1097">
</a>



</figure>

<h3 id="wave-scan-and-prefix">Wave Scan and Prefix</h3>
<p>Wave Reduction系に似ていますが、演算の対象が自身のLane Index未満のActive Laneのみです。自身のLaneは演算の対象に含みません。
演算の結果は、基本的にはLaneごとに異なる値が返されることになります。</p>
<h4 id="waveprefixcountbits"><code>WavePrefixCountBits</code></h4>
<p>引数にboolを指定します。自身のLane Index未満のActive Laneで、引数に<code>true</code>を指定した個数を返します。</p>
<h4 id="waveprefixsum"><code>WavePrefixSum</code></h4>
<p>引数に、読み取りの対象となる変数を指定します。自身のLane Index未満のActive Laneの、変数の値を加算した結果を返します。
演算の順序については、API仕様としての明確な定義が無いので、扱う変数の型や、値の範囲について注意が必要です。<code>[precise]</code>フラグは無視されます。</p>
<h4 id="waveprefixproduct"><code>WavePrefixProduct</code></h4>
<p>引数に、読み取りの対象となる変数を指定します。自身のLane Index未満のActive Laneの、変数の値を乗算した結果を返します。
演算の順序については、API仕様としての明確な定義が無いので、扱う変数の型や、値の範囲について注意が必要です。<code>[precise]</code>フラグは無視されます。</p>






  



  
  











<figure class="center" >


  <a data-fancybox="" href="/post/wave_intrinsics1/waveprefixop_hu36665e6520788b3009382913080bbf2c_71179_2000x2000_fit_lanczos_2.png" >


  <img data-src="/post/wave_intrinsics1/waveprefixop_hu36665e6520788b3009382913080bbf2c_71179_2000x2000_fit_lanczos_2.png" class="lazyload" alt="" width="40%" height="742">
</a>



</figure>

<h3 id="quad-wide-shuffle-operations">Quad-wide Shuffle operations</h3>
<p>Pixel Shaderでのみ使用可能なWave Intrinsicsです。
(これについては、2020/08現在ドキュメントの表記と実装に食い違いがあります。ドキュメントにはCompute Shaderでも使用可能と表記されており、その場合、Lane Indexの0より4 Laneごとに区切ったLaneがQuadとして扱われるとされています。
しかし実際には、Quad系を使用したCompute Shaderのコンパイル時に<code>opcode 'QuadReadAcross' should only be used in 'Pixel Shader'</code>というメッセージが出力されます。そして、シェーダーの生成にも失敗します。)</p>
<h4 id="quadreadlaneat"><code>QuadReadLaneAt</code></h4>
<p>引数に、Quad内のローカルのLane Indexと、読み取り対象となる変数を指定します。Quad内で同じ値が返されます。
読み取り対象LaneがInactive Laneだった場合の読み取り結果は未定義なので注意が必要です。
Pixel ShaderにおけるQuad内のローカルのLane Indexは、下図に示した通りRow Orientedとなっています。</p>
<h4 id="quadreadacrossdiagonal"><code>QuadReadAcrossDiagonal</code></h4>
<p>引数に、読み取り対象となる変数を指定します。Quad内で互いに対角の位置にあるLaneの値を読み取ります。(例えば、Lane:0はLane:3の値を受け取ります。)
(APIドキュメントに明記がありませんが、読み取り対象LaneがInactive Laneだった場合の読み取り結果は未定義なので注意が必要です。)</p>
<h4 id="quadreadacrossx"><code>QuadReadAcrossX</code></h4>
<p>引数に、読み取り対象となる変数を指定します。Quad内で互いに水平の位置にあるLaneの値を読み取ります。(例えば、Lane:0はLane:1の値を受け取ります。)
(APIドキュメントに明記がありませんが、読み取り対象LaneがInactive Laneだった場合の読み取り結果は未定義なので注意が必要です。)</p>
<h4 id="quadreadacrossy"><code>QuadReadAcrossY</code></h4>
<p>引数に、読み取り対象となる変数を指定します。Quad内で互いに垂直の位置にあるLaneの値を読み取ります。(例えば、Lane:0はLane:3の値を受け取ります。)
(APIドキュメントに明記がありませんが、読み取り対象LaneがInactive Laneだった場合の読み取り結果は未定義なので注意が必要です。)</p>






  



  
  











<figure class="center" >


  <a data-fancybox="" href="/post/wave_intrinsics1/wavequadop_hudda5976e667c4f4ea513984d01905e77_110927_2000x2000_fit_lanczos_2.png" >


  <img data-src="/post/wave_intrinsics1/wavequadop_hudda5976e667c4f4ea513984d01905e77_110927_2000x2000_fit_lanczos_2.png" class="lazyload" alt="" width="40%" height="916">
</a>



</figure>

<h2 id="shader-model-65のwave-intrinsicsについて">Shader Model 6.5のWave Intrinsicsについて</h2>
<p>Model 6.5で、いくつかの新しいWaveIntrinsicsが導入されています。</p>
<h4 id="wavematch"><code>WaveMatch</code></h4>
<p>引数に、読み取り対象となる変数を指定します。<br>
戻り値にuint4を返します。戻り値のuint4は、128bit-wideのビットマスクとなっており、各Active Laneの引数で指定された変数の値が、自身のLaneの変数の値と等しい場合に、ビットがセットされます。Inacive Laneは暗黙的に0が設定されます。</p>






  



  
  











<figure class="center" >


  <a data-fancybox="" href="/post/wave_intrinsics1/wavematch_hu0c1f58aae92c4965302c5d4274ad6622_58909_2000x2000_fit_lanczos_2.png" >


  <img data-src="/post/wave_intrinsics1/wavematch_hu0c1f58aae92c4965302c5d4274ad6622_58909_2000x2000_fit_lanczos_2.png" class="lazyload" alt="" width="40%" height="707">
</a>



</figure>

<h4 id="wavemultiprefixsum"><code>WaveMultiPrefixSum</code></h4>
<p>引数に、読み取り対象となる変数を指定します。また、引数に128bit-wideのビットマスクとなる uint4 を指定します。<br>
<code>WaveActiveSum</code>と動作は似ていますが、加算の対象となるLaneがビットマスクで指定されたLaneに限定される点が異なります。
ビットマスクは、Laneごとに設定を変更出来ますが、一つのLaneは1種類のビットマスクにしか所属する事ができません。
つまり、ビットマスクによって、Laneをパーティショニングしてサブセット化する事が出来ますが、各々のLaneが完全に自由にビットマスクを指定できるわけではありません。一つのLaneが複数の種類のビットマスクに所属した場合の動作は未定義です。<br>
Waveのサイズを超えるBitやInactive Laneのビットは無視されます。(ビットがゼロとして扱います。)
このビットマスクの仕様は他のWaveMultiPrefix系と共通です。</p>






  



  
  











<figure class="center" >


  <a data-fancybox="" href="/post/wave_intrinsics1/wavemultiprefixsum_hue9d268744f4c6ffd484f30d798dfb5fc_135719_2000x2000_fit_lanczos_2.png" >


  <img data-src="/post/wave_intrinsics1/wavemultiprefixsum_hue9d268744f4c6ffd484f30d798dfb5fc_135719_2000x2000_fit_lanczos_2.png" class="lazyload" alt="" width="40%" height="1182">
</a>



</figure>

<h4 id="wavemultiprefixproduct"><code>WaveMultiPrefixProduct</code></h4>
<p>引数に、読み取り対象となる変数を指定します。また、引数に128bit-wideのビットマスクとなるuint4を指定します。<br>
<code>WaveActiveProduct</code>と動作は似ていますが、乗算の対象となるLaneがビットマスクで指定されたLaneに限定される点が異なります。</p>
<h4 id="wavemultiprefixcountbit"><code>WaveMultiPrefixCountBit</code></h4>
<p>引数に、bool値を指定します。また、引数に128bit-wideのビットマスクとなるuint4を指定します。<br>
<code>WaveActiveCountBit</code>と動作は似ていますが、乗算の対象となるLaneがビットマスクで指定されたLaneに限定される点が異なります。</p>
<h4 id="wavemultiprefixand"><code>WaveMultiPrefixAnd</code></h4>
<p>引数に、読み取り対象となる整数型の変数を指定します。また、引数に128bit-wideのビットマスクとなるuint4を指定します。<br>
<code>WaveActiveBitAnd</code>と動作は似ていますが、乗算の対象となるLaneがビットマスクで指定されたLaneに限定される点が異なります。</p>
<h4 id="wavemultiprefixor"><code>WaveMultiPrefixOr</code></h4>
<p>引数に、読み取り対象となる整数型の変数を指定します。また、引数に128bit-wideのビットマスクとなるuint4を指定します。<br>
<code>WaveActiveBitOr</code>と動作は似ていますが、乗算の対象となるLaneがビットマスクで指定されたLaneに限定される点が異なります。</p>
<h4 id="wavemultiprefixxor"><code>WaveMultiPrefixXor</code></h4>
<p>引数に、読み取り対象となる整数型の変数を指定します。また、引数に128bit-wideのビットマスクとなるuint4を指定します。<br>
<code>WaveActiveBitXor</code>と動作は似ていますが、乗算の対象となるLaneがビットマスクで指定されたLaneに限定される点が異なります。</p>
<h2 id="終わりに">終わりに</h2>
<p>今回は、Wawve Intrinsicsの動作を理解するための基本的な内容となっているので、実際の使用ケースについては言及しませんでした。
次回は、もう少し実際の利用ケースについて触れたいと思います。</p>

    </div>

    






<div class="article-tags">
  
  <a class="badge badge-light" href="/tag/d3d12/">D3D12</a>
  
  <a class="badge badge-light" href="/tag/waveintrinsics/">WaveIntrinsics</a>
  
</div>



<div class="share-box" aria-hidden="true">
  <ul class="share">
    
      
      
      
        
      
      
      
      <li>
        <a href="https://twitter.com/intent/tweet?url=https://shikihuiku.github.io/post/wave_intrinsics1/&amp;text=HLSL%e3%81%aeWave%20Intrinsics%e3%81%ab%e3%81%a4%e3%81%84%e3%81%a6" target="_blank" rel="noopener" class="share-btn-twitter">
          <i class="fab fa-twitter"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://www.facebook.com/sharer.php?u=https://shikihuiku.github.io/post/wave_intrinsics1/&amp;t=HLSL%e3%81%aeWave%20Intrinsics%e3%81%ab%e3%81%a4%e3%81%84%e3%81%a6" target="_blank" rel="noopener" class="share-btn-facebook">
          <i class="fab fa-facebook"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="mailto:?subject=HLSL%e3%81%aeWave%20Intrinsics%e3%81%ab%e3%81%a4%e3%81%84%e3%81%a6&amp;body=https://shikihuiku.github.io/post/wave_intrinsics1/" target="_blank" rel="noopener" class="share-btn-email">
          <i class="fas fa-envelope"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://www.linkedin.com/shareArticle?url=https://shikihuiku.github.io/post/wave_intrinsics1/&amp;title=HLSL%e3%81%aeWave%20Intrinsics%e3%81%ab%e3%81%a4%e3%81%84%e3%81%a6" target="_blank" rel="noopener" class="share-btn-linkedin">
          <i class="fab fa-linkedin-in"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="whatsapp://send?text=HLSL%e3%81%aeWave%20Intrinsics%e3%81%ab%e3%81%a4%e3%81%84%e3%81%a6%20https://shikihuiku.github.io/post/wave_intrinsics1/" target="_blank" rel="noopener" class="share-btn-whatsapp">
          <i class="fab fa-whatsapp"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://service.weibo.com/share/share.php?url=https://shikihuiku.github.io/post/wave_intrinsics1/&amp;title=HLSL%e3%81%aeWave%20Intrinsics%e3%81%ab%e3%81%a4%e3%81%84%e3%81%a6" target="_blank" rel="noopener" class="share-btn-weibo">
          <i class="fab fa-weibo"></i>
        </a>
      </li>
    
  </ul>
</div>












  
  





  
    
    
    
      
    
    
    
    <div class="media author-card content-widget-hr">
      
        
        <img class="avatar mr-3 avatar-circle" src="/author/shikihuiku/avatar_hu83bef21d3d3e76bee62dd138e5083bbc_32201_270x270_fill_q90_lanczos_center.jpg" alt="shikihuiku">
      

      <div class="media-body">
        <h5 class="card-title"><a href="https://shikihuiku.github.io/">shikihuiku</a></h5>
        
        <p class="card-text">リアルタイムレンダリングが好き</p>
        <ul class="network-icon" aria-hidden="true">
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="https://twitter.com/shikihuiku" target="_blank" rel="noopener">
        <i class="fab fa-twitter"></i>
      </a>
    </li>
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="https://github.com/shikihuiku" target="_blank" rel="noopener">
        <i class="fab fa-github"></i>
      </a>
    </li>
  
</ul>

      </div>
    </div>
  














  
  





  </div>
</article>

      

    
    
    
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.4/imagesloaded.pkgd.min.js" integrity="sha256-lqvxZrPLtfffUl2G/e7szqSvPBILGbwmsGE1MKlOi0Q=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.isotope/3.0.6/isotope.pkgd.min.js" integrity="sha256-CBrpuqrMhXwcLLUd5tvQ4euBHCdh7wGlDfNz8vbu/iI=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js" integrity="sha256-yt2kYMy0w8AbtF89WXb2P1rfjcP/HTHLT7097U8Y5b8=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/instant.page/5.1.0/instantpage.min.js" integrity="sha512-1+qUtKoh9XZW7j+6LhRMAyOrgSQKenQ4mluTR+cvxXjP1Z54RxZuzstR/H9kgPXQsVB8IW7DMDFUJpzLjvhGSQ==" crossorigin="anonymous"></script>

      

      
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.2/highlight.min.js" integrity="sha512-7t8APmYpzEsZP7CYoA7RfMPV9Bb+PJHa9x2WiUnDXZx3XHveuyWUtvNOexhkierl5flZ3tr92dP1mMS+SGlD+A==" crossorigin="anonymous"></script>
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.2/languages/r.min.js"></script>
        
      

    

    
    
      <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.5.1/leaflet.js" integrity="sha256-EErZamuLefUnbMBQbsEqu1USa+btR2oIlCpBJbyD4/g=" crossorigin="anonymous"></script>
    

    
    
    <script>const code_highlighting = true;</script>
    

    
    
    <script>const isSiteThemeDark = false;</script>
    

    
    
    
    
    
    
    <script>
      const search_config = {"indexURI":"/index.json","minLength":1,"threshold":0.3};
      const i18n = {"no_results":"No results found","placeholder":"Search...","results":"results found"};
      const content_type = {
        'post': "Posts",
        'project': "Projects",
        'publication' : "Publications",
        'talk' : "Talks",
        'slides' : "Slides"
        };
    </script>
    

    
    

    
    
    <script id="search-hit-fuse-template" type="text/x-template">
      <div class="search-hit" id="summary-{{key}}">
      <div class="search-hit-content">
        <div class="search-hit-name">
          <a href="{{relpermalink}}">{{title}}</a>
          <div class="article-metadata search-hit-type">{{type}}</div>
          <p class="search-hit-description">{{snippet}}</p>
        </div>
      </div>
      </div>
    </script>
    

    
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/3.2.1/fuse.min.js" integrity="sha256-VzgmKYmhsGNNN4Ph1kMW+BjoYJM2jV5i4IlFoeZA9XI=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script>
    

    
    

    
    

    
    

    
    
    
    
    
    
    
    
    
      
    
    
    
    
    <script src="/js/academic.min.66c553246b0f279a03be6e5597f72b52.js"></script>

    






  
  
  <div class="container">
    <footer class="site-footer">
  

  <p class="powered-by">
    
  </p>

  
  






  <p class="powered-by">
    
    Published with
    <a href="https://sourcethemes.com/academic/" target="_blank" rel="noopener">Academic Website Builder</a>
    

    
    <span class="float-right" aria-hidden="true">
      <a href="#" class="back-to-top">
        <span class="button_icon">
          <i class="fas fa-chevron-up fa-2x"></i>
        </span>
      </a>
    </span>
    
  </p>
</footer>

  </div>
  

  
<div id="modal" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Cite</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <pre><code class="tex hljs"></code></pre>
      </div>
      <div class="modal-footer">
        <a class="btn btn-outline-primary my-1 js-copy-cite" href="#" target="_blank">
          <i class="fas fa-copy"></i> Copy
        </a>
        <a class="btn btn-outline-primary my-1 js-download-cite" href="#" target="_blank">
          <i class="fas fa-download"></i> Download
        </a>
        <div id="modal-error"></div>
      </div>
    </div>
  </div>
</div>

</body>
</html>
